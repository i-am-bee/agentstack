---
title: "Build Agents"
description: "Learn how to build agents for BeeAI"
---

BeeAI can run agents built in any framework - CrewAI, LangChain, BeeAI Framework, or custom Python code. We recommend using our Python template as it's the fastest way to get a working BeeAI agent.

## Prerequisites

- [BeeAI Platform](/introduction/quickstart) installed
- Python 3.11 or higher
- [UV](https://docs.astral.sh/uv/) package manager

## Step 1: Set Up Your Project

Use the [official template](https://github.com/i-am-bee/beeai-platform-agent-starter):

```bash
# Clone the template (or use as GitHub template)
git clone https://github.com/i-am-bee/beeai-platform-agent-starter my-agent
cd my-agent

# Install dependencies
uv sync
```

## Step 2: Implement Your Agent Logic

Modify `src/beeai_agents/agent.py` to implement your agent:

```python
import os
from collections.abc import AsyncGenerator
from acp_sdk import MessagePart, Metadata
from acp_sdk.models import Message
from acp_sdk.server import Context, RunYield, RunYieldResume, Server

server = Server()

@server.agent(
    metadata=Metadata(ui={"type": "hands-off"})
)
async def example_agent(input: list[Message], context: Context) -> AsyncGenerator[RunYield, RunYieldResume]:
    """Polite agent that greets the user"""
    hello_template: str = os.getenv("HELLO_TEMPLATE", "Ciao %s!")
    yield MessagePart(content=hello_template % str(input[-1]))

def run():
    server.run(host=os.getenv("HOST", "127.0.0.1"), port=int(os.getenv("PORT", 8000)))

if __name__ == "__main__":
    run()
```

**Key points:**
- The function name becomes the agent ID unless overridden
- The docstring becomes the agent description in the UI
- Use `input[-1]` to get the most recent message
- Return responses using `yield MessagePart(content="text")`

## Step 3: Define Agent Metadata

Add rich metadata to improve the user experience:

```python
@server.agent(
    name="my-agent",  # Override function name as agent ID
    description="Brief description of what your agent does",  # Override docstring
    metadata=Metadata(
        # UI Configuration
        ui={
            "type": "hands-off",  # or "chat" for conversational agents
            "user_greeting": "How can I help you today?"  # Shown to users
        },
        
        # Basic Information
        framework="Custom",  # Framework used: "CrewAI", "LangChain", "BeeAI", etc.
        author={
            "name": "Your Name",
            "email": "your.email@example.com",
            "url": "https://example.com"
        },
        
        # Environment Variables (optional)
        env=[
            {
                "name": "API_KEY",
                "description": "Required API key for external service",
                "required": True
            },
            {
                "name": "MODEL_NAME",
                "description": "Model to use (optional)",
                "required": False
            }
        ],
        
        # Additional Info (optional)
        recommended_models=["llama3.3:70b-instruct-fp16"],
        dependencies=[
            {"type": "tool", "name": "Weather API"},
            {"type": "tool", "name": "Wikipedia"}
        ]
    )
)
async def my_agent(input: list[Message], context: Context) -> AsyncGenerator[RunYield, RunYieldResume]:
    """Your agent implementation"""
    user_input = str(input[-1])
    
    # Your agent logic here
    result = f"Processed: {user_input}"
    
    yield MessagePart(content=result)
```

**Agent Types:**
- `"hands-off"`: One-shot tasks (summarization, analysis, generation)
- `"chat"`: Conversational interactions with memory

## Step 4: Update Dependencies (if needed)

If you need additional packages, add them to `pyproject.toml`:

```toml
dependencies = [
    "acp-sdk>=0.8.1",
    "requests>=2.31.0",      # Add your dependencies here
    "beeai-framework>=0.1.0", # BeeAI framework for advanced features
]
```

Then sync:
```bash
uv sync
```

## Step 5: Test Locally

### Start the Agent Server

```bash
uv run server
```

You should see:
```
INFO:     Uvicorn running on http://127.0.0.1:8000
```

### Test with BeeAI

In another terminal:

```bash
# List available agents (should show your agent)
beeai list

# Run your agent
beeai run my-agent "Hello world!"

# View logs if needed
beeai logs my-agent
```

## Step 6: Build and Deploy

### For Local Development and Testing

As covered in Step 5, you can develop and test locally without building containers - just run `uv run server` and test with BeeAI CLI.

### For Production Deployment

To deploy to a production BeeAI platform or share with others, you need to build a container image.

#### Build Container Images

```bash
# For local BeeAI platform (single architecture)
beeai build .

# For production hosted platforms (multi-platform)
beeai build . --tag my-agent:v1.0.0 --multi-platform --no-import
```

#### Set Up Automated CI/CD

The template includes a GitHub Actions workflow that automatically builds production-ready images:

**.github/workflows/build-agent.yaml** (already included in template):
```yaml
name: Build and Push Agent Image
on:
  push:
    branches:
      - main
jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    - name: Login to GitHub Container Registry
      uses: docker/login-action@v2
      with:
        registry: ghcr.io
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3
    - name: Build and Push
      run: |
        # Builds multi-platform image for production deployment
        beeai build ./ --tag ghcr.io/${{ github.repository }}/my-agent:latest --no-import --multi-platform
        docker push ghcr.io/${{ github.repository }}/my-agent:latest
```

**To enable automatic production builds:**
1. Push your code to GitHub
2. The workflow automatically builds multi-platform images on every push to `main`
3. Images are pushed to GitHub Container Registry
4. Ready for deployment to any BeeAI platform instance

### Deploy Your Agent

#### For Local BeeAI Platform

```bash
# Option 1: From locally built image
beeai add my-agent:v1.0.0

# Option 2: From GitHub (BeeAI builds it locally)
beeai add https://github.com/your-username/my-agent
```

#### For Production/Hosted BeeAI Platforms

```bash
# Option 1: From container registry (recommended for production)
beeai add ghcr.io/your-username/my-agent:latest

# Option 2: From GitHub with specific version
beeai add https://github.com/your-username/my-agent@v1.0.0
```

<Tip>
**Local vs Production Summary:**
- **Local development:** Run `uv run server` - no containers needed
- **Production deployment:** Use CI/CD to build multi-platform container images
- **Hosted platforms:** Deploy from container registries for best performance
</Tip>