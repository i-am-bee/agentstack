---
title: "Client in the loop"
---

import AlphaWarning from "/snippets/alpha-warning.mdx";

<AlphaWarning />

Agent communication typically involves interactions between two parties, one of which is always an agent, while the other may be another agent, a human interacting through the UI, or, for example, a system interacting via an API.

We refer to the party interacting with the agent as the **Client**.

Communication typically follows a request-response patternâ€”for example, the Client requests an action from the agent and expects a response upon completion.

However, there are cases where the agent requires additional data or action from the Client to proceed. Examples include confirming if a selected restaurant is acceptable or verifying geolocation data provided by the user's browser. This interaction is what we call **Client in the loop**.

This concept enables the Agent to request specific information from the Client to continue its task. Once the Client provides the necessary data, the Agent resumes its work.

"Client in the loop" is conceptually similar to "Human in the loop," but more abstract, aligning with the ACP since the Client does not need to be a human.

## Awaits

ACP addresses the Client in the loop concept through a mechanism called a **Await**.

The Agent can request a Await, pausing its execution until the Client provides the necessary information to continue.

In the protocol, this is represented by returning a run status of `awaiting`. The Client is then supposed to resume the run and provide the required payload to resolve the Await.

```mermaid
sequenceDiagram

participant Client
participant Agent

Client->>Agent: POST /run (with initial request)
Note over Agent: Agent processes request
Note over Agent: Agent needs additional information

Agent-->>Client: Response: status="awaiting", await_request={requestData}
Note over Client: Client processes await request

Client->>Agent: POST /run/{runId} (with await_response={responseData})
Note over Agent: Agent continues processing with new data

Agent-->>Client: Final response (completed or another await)

```
